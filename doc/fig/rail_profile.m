
function [xprf, yprf] = rail_profile();

% function [xprf, yprf] = rail_profile();

% points obtained from ginput:

x = [ 253.6670 221.7798 200.9555 192.4957 185.3373 182.0835 183.3850 ...
      187.9403 225.6844 230.8905 233.4935 234.1443 230.8905 219.8275 ...
      165.1638 160.6085 149.5456 118.9599 115.7061 115.0553 114.4046 ...
      115.7061 390.9772 393.5803 394.2310 390.3265 348.0271 340.8688 ...
      286.8557 279.6974 275.1421 273.1898 277.0944 280.9989 321.3460 ...
      323.9490 325.2505 325.2505 320.0445 312.2354 297.2679 283.6020 ...
      254.9685 253.6670 ];
y = [ 337.7863 338.4371 333.2310 328.6757 315.6605 272.7104 267.5043 ...
      262.9490 250.5846 245.3785 238.8709  93.1009  80.0857  69.0228 ...
       49.5000  48.8492  46.8970  44.2939  42.9924  39.7386  24.7711 ...
       22.1681  21.5174  22.8189  38.4371  42.9924  48.1985  50.1508 ...
       70.3243  78.1334  89.1963 239.5217 245.3785 249.2831 264.2505 ...
      265.5521 270.1074 311.1052 320.8666 329.3265 333.8818 337.7863 ...
      337.1356 337.7863 ];

% delete unwanted points

for i = [43, 42, 19, 17],
   x(i) = []; y(i) = [];
end

% shift center to x=0

x = x - 254;

% create symmetric profile

xprf = (x - fliplr(x))/2;
yprf = (y + fliplr(y))/2;

% set y positive downwards, origin at top of rail

yprf = - (yprf - max(yprf));

% scale such that foot is x= -70:70 at y=160, 

xprf = xprf *  70/max(xprf);
yprf = yprf * 160/max(yprf);

if (0==1)
   figure(2); clf; hold on;
   plot( x,  y, '-*')
   % plot(-x,  y, '-o')
   plot(xprf, yprf, '-o')
   grid on
   for i=1:length(x),
      text(x(i), y(i), num2str(i));
   end
end
